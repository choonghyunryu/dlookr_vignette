<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>dlookr vignettes: Data quality diagnosis</title>

  <meta property="description" itemprop="description" content="Introduce dlookr package for diagnose data quality"/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-11-28"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-11-28"/>
  <meta name="article:author" content="Choonghyun Ryu"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="dlookr vignettes: Data quality diagnosis"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Introduce dlookr package for diagnose data quality"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="dlookr vignettes"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="dlookr vignettes: Data quality diagnosis"/>
  <meta property="twitter:description" content="Introduce dlookr package for diagnose data quality"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","site","output","author","date"]}},"value":[{"type":"character","attributes":{},"value":["Data quality diagnosis"]},{"type":"character","attributes":{},"value":["Introduce dlookr package for diagnose data quality\n"]},{"type":"character","attributes":{},"value":["distill::distill_website"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Choonghyun Ryu"]},{"type":"character","attributes":{},"value":["https://dataholic.netlify.app/"]}]}]},{"type":"character","attributes":{},"value":["2021-11-28"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */



  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       #0F2E3D;
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */
  </style>
  <style type="text/css">
  /* base variables */

  /* Edit the CSS properties in this file to create a custom
     Distill theme. Only edit values in the right column
     for each row; values shown are the CSS defaults.
     To return any property to the default,
     you may set its value to: unset
     All rows must end with a semi-colon.                      */

  /* Optional: embed custom fonts here with `@import`          */
  /* This must remain at the top of this file.                 */

  :root {
    --custom-grey60: rgb(102, 102, 102);
    --custom-grey20: rgb(204, 204, 204);
    --custom-grey10: rgb(230, 230, 230);
    --custom-blue: rgb(0, 114, 188);
    --custom-lightblue: rgb(204, 227, 242);
    --custom-orange: rgb(255, 127, 42); 
    --custom-lightorange: rgb(255, 204, 170); 
  }

  @font-face {
   font-family: 'NanumSquare';
   font-weight: 400;
   src: url(NanumSquare/NanumSquareR.eot);
   src: url(NanumSquare/NanumSquareR.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareR.woff) format('woff'),
        url(NanumSquare/NanumSquareR.ttf) format('truetype');
  }
  @font-face {
   font-family: 'NanumSquare';
   font-weight: 700;
   src: url(NanumSquare/NanumSquareB.eot);
   src: url(NanumSquare/NanumSquareB.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareB.woff) format('woff'),
        url(NanumSquare/NanumSquareB.ttf) format('truetype');
  }
  @font-face {
   font-family: 'NanumSquare';
   font-weight: 800;
   src: url(NanumSquare/NanumSquareEB.eot);
   src: url(NanumSquare/NanumSquareEB.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareEB.woff) format('woff'),
        url(NanumSquare/NanumSquareEB.ttf) format('truetype');
  }
  @font-face {
   font-family: 'NanumSquare';
   font-weight: 300;
   src: url(NanumSquare/NanumSquareL.eot);
   src: url(NanumSquare/NanumSquareL.eot?#iefix) format('embedded-opentype'),
        url(NanumSquare/NanumSquareL.woff) format('woff'),
        url(NanumSquare/NanumSquareL.ttf) format('truetype');
  }

  html {
    /*-- Main font sizes --*/
    --title-size:      50px;
    --body-size:       1.06rem;
    --code-size:       14px;
    --aside-size:      12px;
    --fig-cap-size:    13px;
    /*-- Main font colors --*/
    --title-color:     #000000;
    --header-color:    rgba(0, 0, 0, 0.8);
    --body-color:      rgba(0, 0, 0, 0.8);
    --aside-color:     rgba(0, 0, 0, 0.6);
    --fig-cap-color:   rgba(0, 0, 0, 0.6);
    /*-- Specify custom fonts ~~~ must be imported above   --*/
    --heading-font:    sans-serif;
    --mono-font:       monospace;
    --body-font:       sans-serif;
    --navbar-font:     sans-serif;  /* websites + blogs only */
  }

  /*-- ARTICLE METADATA --*/
  d-byline {
    --heading-size:    0.6rem;
    --heading-color:   rgba(0, 0, 0, 0.5);
    --body-size:       0.8rem;
    --body-color:      rgba(0, 0, 0, 0.8);
  }

  /*-- ARTICLE TABLE OF CONTENTS --*/
  .d-contents {
    --heading-size:    18px;
    --contents-size:   13px;
  }

  /*-- ARTICLE APPENDIX --*/
  d-appendix {
    --heading-size:    15px;
    --heading-color:   rgba(0, 0, 0, 0.65);
    --text-size:       0.8em;
    --text-color:      rgba(0, 0, 0, 0.5);
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  /* These properties only apply to Distill sites and blogs  */

  .distill-site-header {
    --title-size:       18px;
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       var(--custom-blue);
  }

  .distill-site-footer {
    --text-color:       rgba(255, 255, 255, 0.8);
    --text-size:        15px;
    --hover-color:      white;
    --bkgd-color:       var(--custom-blue);
  }

  /*-- Additional custom styles --*/
  /* Add any additional CSS rules below                      */

  .preface {
    font-size: 11pt;
    background-color: var(--custom-lightblue);
    margin-top: 2em;
    margin-bottom: 0.5em;  
    padding: 1.5em;
    padding-top: 1em;
    border-color: DodgerBlue;
  }

  h1 {
    font-size: 30px !important;  
    color: var(--custom-blue) !important;
    font-family: NanumSquare !important;
    margin-top: 15px !important;
    padding-top: 15px !important;  
    margin-bottom: 15px !important;
    font-weight: bold;
  }

  h2 {
    font-size: 25px !important;  
    color: var(--custom-blue) !important;  
    font-family: NanumSquare !important;  
    padding-top: 15px !important;  
    margin-top: 15px !important;
    padding-bottom: 10px !important;  
    margin-bottom: 10px !important;    
    font-weight: bold;
  }

  h3 {
    font-size: 20px !important;  
    color: var(--custom-blue) !important;  
    font-family: NanumSquare !important;  
    margin-top: 10px !important;
    margin-bottom: 10px !important; 
    padding-top: 10px !important;
    padding-bottom: 10px !important;   
    font-weight: bold;
  }

  d-byline h3 {
    font-size: 0.6rem !important;   
    font-weight: 400 !important;   
    color: rgba(0, 0, 0, 0.5) !important;   
    margin: 0 !important;   
  }
      
  d-byline {
    contain: content;
    overflow: hidden;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    font-size: 0.8rem;
    line-height: 1.8em;
    padding: 1.5rem 0;
    min-height: 1.8em;
  } 

  .bg-blue,
  .bg-orange,
  .bg-grey {
    padding: 1.6em;
    margin-top: 1.0em;
    margin-bottom: 1.0em;
  }
  .bg-blue {
    background-color: var(--custom-lightblue);
  }
  .bg-orange {
    background-color: var(--custom-lightorange);
  }
  .bg-grey {
    background-color: var(--custom-grey20);
  }
  .bg-blue > *:last-child,
  .bg-orange > *:last-child,
  .bg-grey > *:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
  }

  .panelset {
    --panel-tab-foreground: currentColor !important;
    --panel-tab-active-foreground: var(--custom-blue) !important;
    --panel-tab-active-background: var(--custom-lightblue) !important;  
    --panel-tab-hover-foreground: var(--custom-blue) !important;
    --panel-tabs-border-bottom: #ddd !important;
    --panel-tab-inactive-opacity: 0.5 !important;
  }

  .panel {
    margin-bottom: 10px;
    margin-top: 10px;
  }
  </style>
  <style type="text/css">
  /* base style */

  /* FONT FAMILIES */

  :root {
    --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  body,
  .posts-list .post-preview p,
  .posts-list .description p {
    font-family: var(--body-font), var(--body-default);
  }

  h1, h2, h3, h4, h5, h6,
  .posts-list .post-preview h2,
  .posts-list .description h2 {
    font-family: var(--heading-font), var(--heading-default);
  }

  d-article div.sourceCode code,
  d-article pre code {
    font-family: var(--mono-font), var(--mono-default);
  }


  /*-- TITLE --*/
  d-title h1,
  .posts-list > h1 {
    color: var(--title-color, black);
  }

  d-title h1 {
    font-size: var(--title-size, 50px);
  }

  /*-- HEADERS --*/
  d-article h1,
  d-article h2,
  d-article h3,
  d-article h4,
  d-article h5,
  d-article h6 {
    color: var(--header-color, rgba(0, 0, 0, 0.8));
  }

  /*-- BODY --*/
  d-article > p,  /* only text inside of <p> tags */
  d-article > ul, /* lists */
  d-article > ol {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
    font-size: var(--body-size, 1.06rem);
  }


  /*-- CODE --*/
  d-article div.sourceCode code,
  d-article pre code {
    font-size: var(--code-size, 14px);
  }

  /*-- ASIDE --*/
  d-article aside {
    font-size: var(--aside-size, 12px);
    color: var(--aside-color, rgba(0, 0, 0, 0.6));
  }

  /*-- FIGURE CAPTIONS --*/
  figure .caption,
  figure figcaption,
  .figure .caption {
    font-size: var(--fig-cap-size, 13px);
    color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
  }

  /*-- METADATA --*/
  d-byline h3 {
    font-size: var(--heading-size, 0.6rem);
    color: var(--heading-color, rgba(0, 0, 0, 0.5));
  }

  d-byline {
    font-size: var(--body-size, 0.8rem);
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  d-byline a,
  d-article d-byline a {
    color: var(--body-color, rgba(0, 0, 0, 0.8));
  }

  /*-- TABLE OF CONTENTS --*/
  .d-contents nav h3 {
    font-size: var(--heading-size, 18px);
  }

  .d-contents nav a {
    font-size: var(--contents-size, 13px);
  }

  /*-- APPENDIX --*/
  d-appendix h3 {
    font-size: var(--heading-size, 15px);
    color: var(--heading-color, rgba(0, 0, 0, 0.65));
  }

  d-appendix {
    font-size: var(--text-size, 0.8em);
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  d-appendix d-footnote-list a.footnote-backlink {
    color: var(--text-color, rgba(0, 0, 0, 0.5));
  }

  /*-- WEBSITE HEADER + FOOTER --*/
  .distill-site-header .title {
    font-size: var(--title-size, 18px);
    font-family: var(--navbar-font), var(--heading-default);
  }

  .distill-site-header a,
  .nav-dropdown .nav-dropbtn {
    font-family: var(--navbar-font), var(--heading-default);
  }

  .nav-dropdown .nav-dropbtn {
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    font-size: var(--text-size, 15px);
  }

  .distill-site-header a:hover,
  .nav-dropdown:hover .nav-dropbtn {
    color: var(--hover-color, white);
  }

  .distill-site-header {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer {
    font-size: var(--text-size, 15px);
    color: var(--text-color, rgba(255, 255, 255, 0.8));
    background-color: var(--bkgd-color, #0F2E3D);
  }

  .distill-site-footer a:hover {
    color: var(--hover-color, white);
  }</style>
  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.8/header-attrs.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Data quality diagnosis","description":"Introduce dlookr package for diagnose data quality","authors":[{"author":"Choonghyun Ryu","authorURL":"https://dataholic.netlify.app/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-11-28T00:00:00.000+00:00","citationText":"Ryu, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://choonghyunryu.github.io/dlookr/">
<img src="fig/dlookr.png" alt="Logo"/>
</a>
<a href="index.html" class="title">dlookr vignettes</a>
</div>
<div class="nav-right">
<a href="index.html">Introduce dlookr</a>
<a href="diagonosis.html">Data quality diagnosis</a>
<a href="EDA.html">Exploratory Data Analysis</a>
<a href="transformation.html">Data Transformation</a>
<a href="https://github.com/choonghyunryu/dlookr">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Data quality diagnosis</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Introduce dlookr package for diagnose data quality</p></p>
</div>

<div class="d-byline">
  Choonghyun Ryu <a href="https://dataholic.netlify.app/" class="uri">https://dataholic.netlify.app/</a> 
  
<br/>2021-11-28
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#supported-data-structures">Supported data structures</a></li>
<li><a href="#data-nycflights13">Data: nycflights13</a></li>
<li><a href="#data-diagnosis">Data diagnosis</a>
<ul>
<li><a href="#general-diagnosis-of-all-variables-with-diagnose">General diagnosis of all variables with <code>diagnose()</code></a></li>
<li><a href="#diagnosis-of-numeric-variables-with-diagnose_numeric">Diagnosis of numeric variables with <code>diagnose_numeric()</code></a></li>
<li><a href="#diagnosis-of-categorical-variables-with-diagnose_category">Diagnosis of categorical variables with <code>diagnose_category()</code></a></li>
<li><a href="#diagnosing-outliers-with-diagnose_outlier">Diagnosing outliers with <code>diagnose_outlier()</code></a></li>
<li><a href="#visualization-of-outliers-using-plot_outlier">Visualization of outliers using <code>plot_outlier()</code></a></li>
<li><a href="#visualization-for-missing-values">Visualization for missing values</a></li>
</ul></li>
<li><a href="#automated-report">Automated report</a>
<ul>
<li><a href="#create-a-diagnostic-report-using-diagnose_web_report">Create a diagnostic report using <code>diagnose_web_report()</code></a></li>
<li><a href="#create-a-diagnostic-report-using-diagnose_paged_report">Create a diagnostic report using <code>diagnose_paged_report()</code></a></li>
</ul></li>
<li><a href="#diagnosing-tables-in-dbms">Diagnosing tables in DBMS</a>
<ul>
<li><a href="#preparing-table-data">Preparing table data</a></li>
<li><a href="#diagnose-data-quality-of-variables-in-the-dbms">Diagnose data quality of variables in the DBMS</a></li>
<li><a href="#diagnose-data-quality-of-categorical-variables-in-the-dbms">Diagnose data quality of categorical variables in the DBMS</a></li>
<li><a href="#diagnose-data-quality-of-numerical-variables-in-the-dbms">Diagnose data quality of numerical variables in the DBMS</a></li>
<li><a href="#diagnose-outlier-of-numerical-variables-in-the-dbms">Diagnose outlier of numerical variables in the DBMS</a></li>
<li><a href="#plot-outlier-information-of-numerical-data-diagnosis-in-the-dbms">Plot outlier information of numerical data diagnosis in the DBMS</a></li>
<li><a href="#reporting-the-information-of-data-diagnosis-for-table-of-thr-dbms">Reporting the information of data diagnosis for table of thr DBMS</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="preface">Preface</h2>
<p>After you have acquired the data, you should do the following:</p>
<ul>
<li><strong>Diagnose data quality.</strong>
<ul>
<li><strong>If there is a problem with data quality,</strong></li>
<li><strong>The data must be corrected or re-acquired.</strong></li>
</ul></li>
<li>Explore data to understand the data and find scenarios for performing the analysis.</li>
<li>Derive new variables or perform variable transformations.</li>
</ul>
<p>The dlookr package makes these steps fast and easy:</p>
<ul>
<li><strong>Performs a data diagnosis or automatically generates a data diagnosis report.</strong></li>
<li>Discover data in a variety of ways, and automatically generate EDA(exploratory data analysis) report.</li>
<li>Impute missing values and outliers, resolve skewed data, and categorize continuous variables into categorical variables. And generates an automated report to support it.</li>
</ul>
<p>This document introduces <strong>Data Quality Diagnosis</strong> methods provided by the dlookr package. You will learn how to diagnose the quality of <code>tbl_df</code> data that inherits from data.frame and <code>data.frame</code> with functions provided by dlookr.</p>
<p>dlookr increases synergy with <code>dplyr</code>. Particularly in data exploration and data wrangle, it increases the efficiency of the <code>tidyverse</code> package group.</p>
<h2 id="supported-data-structures">Supported data structures</h2>
<p>Data diagnosis supports the following data structures.</p>
<ul>
<li>data frame : data.frame class.</li>
<li>data table : tbl_df class.</li>
<li><strong>table of DBMS</strong> : table of the DBMS through tbl_dbi.
<ul>
<li><strong>Use dplyr as the back-end interface for any DBI-compatible database.</strong></li>
</ul></li>
</ul>
<h2 id="data-nycflights13">Data: nycflights13</h2>
<p>To illustrate basic use of the dlookr package, use the <code>flights</code> data from the <code>nycflights13</code> package. The <code>flights</code> data frame is data about departure and arrival on all flights departing from NYC in 2013.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://github.com/hadley/nycflights13'>nycflights13</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 336776     19</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span>
</code></pre>
</div>
<pre><code># A tibble: 336,776 x 19
   year month   day dep_time sched_dep_time dep_delay arr_time
  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
1  2013     1     1      517            515         2      830
2  2013     1     1      533            529         4      850
3  2013     1     1      542            540         2      923
4  2013     1     1      544            545        -1     1004
# … with 336,772 more rows, and 12 more variables:
#   sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,
#   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
#   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
#   time_hour &lt;dttm&gt;</code></pre>
</div>
<h2 id="data-diagnosis">Data diagnosis</h2>
<p>dlookr aims to diagnose the data and to select variables that can not be used for data analysis or to find the variables that need to be calibrated.:</p>
<ul>
<li><code>diagnose()</code> provides basic diagnostic information for variables.</li>
<li><code>diagnose_category()</code> provides detailed diagnostic information for categorical variables.</li>
<li><code>diagnose_numeric()</code> provides detailed diagnostic information for numerical variables.</li>
<li><code>diagnose_outlier()</code> and <code>plot_outlier()</code> provide information and visualization of outliers.</li>
</ul>
<h3 id="general-diagnosis-of-all-variables-with-diagnose">General diagnosis of all variables with <code>diagnose()</code></h3>
<p><code>diagnose()</code> allows to diagnosis a variables in a data frame. Like function of dplyr, the first argument is the tibble (or data frame). The second and subsequent arguments refer to variables within that data frame.</p>
<p>The variables of the <code>tbl_df</code> object returned by <code>diagnose ()</code> are as follows.</p>
<ul>
<li><code>variables</code> : variable names</li>
<li><code>types</code> : the data type of the variables</li>
<li><code>missing_count</code> : number of missing values</li>
<li><code>missing_percent</code> : percentage of missing values</li>
<li><code>unique_count</code> : number of unique values</li>
<li><code>unique_rate</code> : rate of unique value. unique_count / number of observation</li>
</ul>
<p>For example, we can diagnose all variables in <code>flights</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 19 x 6
  variables types   missing_count missing_percent unique_count
  &lt;chr&gt;     &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 year      integer             0            0               1
2 month     integer             0            0              12
3 day       integer             0            0              31
4 dep_time  integer          8255            2.45         1319
# … with 15 more rows, and 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
</div>
<ul>
<li><code>Missing Value(NA)</code> : Variables with many missing values, ie those with a <code>missing_percent</code> close to 100, should be excluded from the analysis.</li>
<li><code>Unique value</code> : Variables with a unique value (<code>unique_count</code> = 1) are considered to be excluded from data analysis. And if the data type is not numeric (integer, numeric) and the number of unique values is equal to the number of observations (unique_rate = 1), then the variable is likely to be an identifier. Therefore, this variable is also not suitable for the analysis model.</li>
</ul>
<p><code>year</code> can be considered not to be used in the analysis model since <code>unique_count</code> is 1. However, you do not have to remove it if you configure <code>date</code> as a combination of <code>year</code>, <code>month</code>, and <code>day</code>.</p>
<p>For example, we can diagnose only a few selected variables:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Select columns by name</span>
<span class='fu'>diagnose</span><span class='op'>(</span><span class='va'>flights</span>, <span class='va'>year</span>, <span class='va'>month</span>, <span class='va'>day</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 6
  variables types   missing_count missing_percent unique_count
  &lt;chr&gt;     &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 year      integer             0               0            1
2 month     integer             0               0           12
3 day       integer             0               0           31
# … with 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Select all columns between year and day (include)</span>
<span class='fu'>diagnose</span><span class='op'>(</span><span class='va'>flights</span>, <span class='va'>year</span><span class='op'>:</span><span class='va'>day</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 6
  variables types   missing_count missing_percent unique_count
  &lt;chr&gt;     &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 year      integer             0               0            1
2 month     integer             0               0           12
3 day       integer             0               0           31
# … with 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Select all columns except those from year to day (exclude)</span>
<span class='fu'>diagnose</span><span class='op'>(</span><span class='va'>flights</span>, <span class='op'>-</span><span class='op'>(</span><span class='va'>year</span><span class='op'>:</span><span class='va'>day</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 16 x 6
  variables      types   missing_count missing_percent unique_count
  &lt;chr&gt;          &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 dep_time       integer          8255            2.45         1319
2 sched_dep_time integer             0            0            1021
3 dep_delay      numeric          8255            2.45          528
4 arr_time       integer          8713            2.59         1412
# … with 12 more rows, and 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
</div>
<p>By using with dplyr, variables including missing values can be sorted by the weight of missing values.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span> <span class='op'>%&gt;%</span>
  <span class='fu'>diagnose</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>unique_count</span>, <span class='op'>-</span><span class='va'>unique_rate</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>missing_count</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>missing_count</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 4
  variables types   missing_count missing_percent
  &lt;chr&gt;     &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;
1 arr_delay numeric          9430            2.80
2 air_time  numeric          9430            2.80
3 arr_time  integer          8713            2.59
4 dep_time  integer          8255            2.45
# … with 2 more rows</code></pre>
</div>
<h3 id="diagnosis-of-numeric-variables-with-diagnose_numeric">Diagnosis of numeric variables with <code>diagnose_numeric()</code></h3>
<p><code>diagnose_numeric()</code> diagnoses numeric(continuous and discrete) variables in a data frame. Usage is the same as <code>diagnose()</code> but returns more diagnostic information. However, if you specify a non-numeric variable in the second and subsequent argument list, the variable is automatically ignored.</p>
<p>The variables of the <code>tbl_df</code> object returned by <code>diagnose_numeric()</code> are as follows.</p>
<ul>
<li><code>min</code> : minimum value</li>
<li><code>Q1</code> : 1/4 quartile, 25th percentile</li>
<li><code>mean</code> : arithmetic mean</li>
<li><code>median</code> : median, 50th percentile</li>
<li><code>Q3</code> : 3/4 quartile, 75th percentile</li>
<li><code>max</code> : maximum value</li>
<li><code>zero</code> : number of observations with a value of 0</li>
<li><code>minus</code> : number of observations with negative numbers</li>
<li><code>outlier</code> : number of outliers</li>
</ul>
<p>The summary() function summarizes the distribution of individual variables in the data frame and outputs it to the console. The summary values of numeric variables are <code>min</code>, <code>Q1</code>, <code>mean</code>, <code>median</code>, <code>Q3</code> and <code>max</code>, which help to understand the distribution of data.</p>
<p>However, the result displayed on the console has the disadvantage that the analyst has to look at it with the eyes. However, when the summary information is returned in a data frame structure such as tbl_df, the scope of utilization is expanded. <code>diagnose_numeric()</code> supports this.</p>
<p><code>zero</code>, <code>minus</code>, and <code>outlier</code> are useful measures to diagnose data integrity. For example, numerical data in some cases cannot have zero or negative numbers. A numeric variable called <code>employee salary</code> cannot have negative numbers or zeros. Therefore, this variable should be checked for the inclusion of zero or negative numbers in the data diagnosis process.</p>
<p><code>diagnose_numeric()</code> can diagnose all numeric variables of <code>flights</code> as follows.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_numeric</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 14 x 10
  variables   min    Q1    mean median    Q3   max  zero minus outlier
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;
1 year       2013  2013 2013      2013  2013  2013     0     0       0
2 month         1     4    6.55      7    10    12     0     0       0
3 day           1     8   15.7      16    23    31     0     0       0
4 dep_time      1   907 1349.     1401  1744  2400     0     0       0
# … with 10 more rows</code></pre>
</div>
<p>If a numeric variable can not logically have a negative or zero value, it can be used with <code>filter()</code> to easily find a variable that does not logically match:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_numeric</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>minus</span> <span class='op'>&gt;</span> <span class='fl'>0</span> <span class='op'>|</span> <span class='va'>zero</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code># A tibble: 3 x 10
  variables   min    Q1  mean median    Q3   max  zero  minus outlier
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;int&gt;   &lt;int&gt;
1 dep_delay   -43    -5 12.6      -2    11  1301 16514 183575   43216
2 arr_delay   -86   -17  6.90     -5    14  1272  5409 188933   27880
3 minute        0     8 26.2      29    44    59 60696      0       0</code></pre>
</div>
<h3 id="diagnosis-of-categorical-variables-with-diagnose_category">Diagnosis of categorical variables with <code>diagnose_category()</code></h3>
<p><code>diagnose_category()</code> diagnoses the categorical(factor, ordered, character) variables of a data frame. The usage is similar to <code>diagnose()</code> but returns more diagnostic information. If you specify a non-categorical variable in the second and subsequent argument list, the variable is automatically ignored.</p>
<p>The <code>top</code> argument specifies the number of levels to return for each variable. The default is 10, which returns the top 10 level. Of course, if the number of levels is less than 10, all levels are returned.</p>
<p>The variables of the <code>tbl_df</code> object returned by <code>diagnose_category()</code> are as follows.</p>
<ul>
<li><code>variables</code> : variable names</li>
<li><code>levels</code>: level names</li>
<li><code>N</code> : number of observation</li>
<li><code>freq</code> : number of observation at the levels</li>
<li><code>ratio</code> : percentage of observation at the levels</li>
<li><code>rank</code> : rank of occupancy ratio of levels</li>
</ul>
<p>`<code>diagnose_category()</code> can diagnose all categorical variables of <code>flights</code> as follows.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_category</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 43 x 6
  variables levels      N  freq ratio  rank
  &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt;
1 carrier   UA     336776 58665  17.4     1
2 carrier   B6     336776 54635  16.2     2
3 carrier   EV     336776 54173  16.1     3
4 carrier   DL     336776 48110  14.3     4
# … with 39 more rows</code></pre>
</div>
<p>In collaboration with <code>filter()</code> in the <code>dplyr</code> package, we can see that the <code>tailnum</code> variable is ranked in top 1 with 2,512 missing values in the case where the missing value is included in the top 10:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_category</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>levels</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 6
  variables levels      N  freq ratio  rank
  &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt;
1 tailnum   &lt;NA&gt;   336776  2512 0.746     1</code></pre>
</div>
<p>The following example returns a list where the level’s relative percentage is 0.01% or less. Note that the value of the <code>top</code> argument is set to a large value such as 500. If the default value of 10 was used, values below 0.01% would not be included in the list:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span> <span class='op'>%&gt;%</span>
  <span class='fu'>diagnose_category</span><span class='op'>(</span>top <span class='op'>=</span> <span class='fl'>500</span><span class='op'>)</span>  <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>ratio</span> <span class='op'>&lt;=</span> <span class='fl'>0.01</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 x 6
  variables levels      N  freq   ratio  rank
  &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;
1 carrier   OO     336776    32 0.00950    16
2 dest      JAC    336776    25 0.00742    97
3 dest      PSP    336776    19 0.00564    98
4 dest      EYW    336776    17 0.00505    99
# … with 6 more rows</code></pre>
</div>
<p>In the analytics model, you can also consider removing levels where the relative frequency is very small in the observations or, if possible, combining them together.</p>
<h3 id="diagnosing-outliers-with-diagnose_outlier">Diagnosing outliers with <code>diagnose_outlier()</code></h3>
<p><code>diagnose_outlier()</code> diagnoses the outliers of the numeric (continuous and discrete) variables of the data frame. The usage is the same as <code>diagnose()</code>.</p>
<p>The variables of the <code>tbl_df</code> object returned by <code>diagnose_outlier()</code> are as follows.</p>
<ul>
<li><code>outliers_cnt</code> : number of outliers</li>
<li><code>outliers_ratio</code> : percent of outliers</li>
<li><code>outliers_mean</code> : arithmetic average of outliers</li>
<li><code>with_mean</code> : arithmetic average of with outliers</li>
<li><code>without_mean</code> : arithmetic average of without outliers</li>
</ul>
<p><code>diagnose_outlier()</code> can diagnose outliers of all numerical variables on <code>flights</code> as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_outlier</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 14 x 6
  variables outliers_cnt outliers_ratio outliers_mean with_mean
  &lt;chr&gt;            &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
1 year                 0              0           NaN   2013   
2 month                0              0           NaN      6.55
3 day                  0              0           NaN     15.7 
4 dep_time             0              0           NaN   1349.  
# … with 10 more rows, and 1 more variable: without_mean &lt;dbl&gt;</code></pre>
</div>
<p>Numeric variables that contained outliers are easily found with <code>filter()</code>.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_outlier</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>outliers_cnt</span> <span class='op'>&gt;</span> <span class='fl'>0</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code># A tibble: 5 x 6
  variables outliers_cnt outliers_ratio outliers_mean with_mean
  &lt;chr&gt;            &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
1 dep_delay        43216      12.8               93.1     12.6 
2 arr_delay        27880       8.28             121.       6.90
3 flight               1       0.000297        8500     1972.  
4 air_time          5448       1.62             400.     151.  
# … with 1 more row, and 1 more variable: without_mean &lt;dbl&gt;</code></pre>
</div>
<p>The following example finds a numeric variable with an outlier ratio of 5% or more, and then returns the result of dividing mean of outliers by overall mean in descending order:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>diagnose_outlier</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>outliers_ratio</span> <span class='op'>&gt;</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>rate <span class='op'>=</span> <span class='va'>outliers_mean</span> <span class='op'>/</span> <span class='va'>with_mean</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>rate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>outliers_cnt</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 6
  variables outliers_ratio outliers_mean with_mean without_mean  rate
  &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;
1 arr_delay           8.28         121.       6.90       -3.69  17.5 
2 dep_delay          12.8           93.1     12.6         0.444  7.37</code></pre>
</div>
<p>In cases where the mean of the outliers is large relative to the overall average, it may be desirable to impute or remove the outliers.</p>
<h3 id="visualization-of-outliers-using-plot_outlier">Visualization of outliers using <code>plot_outlier()</code></h3>
<p><code>plot_outlier()</code> visualizes outliers of numerical variables(continuous and discrete) of data.frame. Usage is the same <code>diagnose()</code>.</p>
<p>The plot derived from the numerical data diagnosis is as follows.</p>
<ul>
<li>With outliers box plot</li>
<li>Without outliers box plot</li>
<li>With outliers histogram</li>
<li>Without outliers histogram</li>
</ul>
<p><code>plot_outlier()</code> can visualize an outliers in the <code>arr_delay</code> variable of <code>flights</code> as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_outlier</span><span class='op'>(</span><span class='va'>arr_delay</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="diagonosis_files/figure-html5/plot_outlier-1.png" width="600px" style="display: block; margin: auto;" /></p>
</div>
<p>The following example uses <code>diagnose_outlier()</code>, <code>plot_outlier()</code>, and <code>dplyr</code> packages to visualize all numerical variables with an outlier ratio of 5% or higher.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_outlier</span><span class='op'>(</span><span class='fu'>diagnose_outlier</span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
                 <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>outliers_ratio</span> <span class='op'>&gt;=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
                 <span class='fu'>select</span><span class='op'>(</span><span class='va'>variables</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
                 <span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Analysts should look at the results of the visualization to decide whether to remove or replace outliers. In some cases, you should consider removing variables with outliers from the data analysis model.</p>
<p>Looking at the results of the visualization, <code>arr_delay</code> shows that the observed values without outliers are similar to the normal distribution. In the case of a linear model, we might consider removing or imputing outliers.</p>
<h3 id="visualization-for-missing-values">Visualization for missing values</h3>
<p>It is important to look at the missing values of individual variables, but it is also important to look at the relationship between the variables including the missing values.</p>
<p>dlookr provides a visualization tool that looks at the relationship of variables including missing values.</p>
<h4 id="visualize-pareto-chart-using-plot_na_pareto">visualize pareto chart using <code>plot_na_pareto()</code></h4>
<p><code>plot_na_pareto()</code> draws a pareto chart by collecting variables including missing values.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plot_na_pareto</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="diagonosis_files/figure-html5/plot_na_pareto1-1.png" width="600px" style="display: block; margin: auto;" /></p>
</div>
<p>The default value of the <code>only_na</code> argument is FALSE, which includes variables that do not contain missing values, but if this value is set to TRUE, only variables containing missing values are visualized. The variable <code>age</code> was excluded from this plot.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plot_na_pareto</span><span class='op'>(</span>only_na <span class='op'>=</span> <span class='cn'>TRUE</span>, main <span class='op'>=</span> <span class='st'>"Pareto Chart for mice::boys"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The rating of the variable is expressed as a proportion of missing values. It is calculated as the ratio of missing values. If it is [0, 0.05), it is <code>Good</code>, if it is [0.05, 0.4) it is <code>OK</code>, if it is [0.4, 0.8) it is <code>Bad</code>, and if it is [0.8, 1.0] it is <code>Remove</code>. You can override this grade using the <code>grade</code> argument as follows:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plot_na_pareto</span><span class='op'>(</span>grade <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>High <span class='op'>=</span> <span class='fl'>0.1</span>, Middle <span class='op'>=</span> <span class='fl'>0.6</span>, Low <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>, relative <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>If the <code>plot</code> argument is set to FALSE, information about missing values is returned instead of plotting.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>plot_na_pareto</span><span class='op'>(</span><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span>, only_na <span class='op'>=</span> <span class='cn'>TRUE</span>, plot <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="visualize-combination-chart-using-plot_na_hclust">visualize combination chart using <code>plot_na_hclust()</code></h4>
<p>It is important to look at the relationship between variables, including missing values. <code>plot_na_hclust()</code> visualizes the relationship of variables that contain missing values. This function rearranges the positions of variables using hierarchical clustering. Then, the expression of the missing value is visualized by grouping similar variables.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plot_na_hclust</span><span class='op'>(</span>main <span class='op'>=</span> <span class='st'>"Distribution of missing value"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="diagonosis_files/figure-html5/plot_na_hclust-1.png" width="600px" style="display: block; margin: auto;" /></p>
</div>
<h4 id="visualize-combination-chart-using-plot_na_intersect">visualize combination chart using <code>plot_na_intersect()</code></h4>
<p><code>plot_na_intersect()</code> visualize the combinations of missing value across cases.</p>
<p>The visualization consists of four parts. The bottom left, which is the most basic, visualizes the case of cross(intersection)-combination. The x-axis is the variable including the missing value, and the y-axis represents the case of a combination of variables. And on the marginal of the two axes, the frequency of the case is expressed as a bar graph. Finally, the visualization at the top right expresses the number of variables including missing values in the data set, and the number of observations including missing values and complete cases .</p>
<p>This example visualize the combination variables that is include missing value.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plot_na_intersect</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="diagonosis_files/figure-html5/plot_na_hclust1-1.png" width="600px" style="display: block; margin: auto;" /></p>
</div>
<p>If the <code>n_vars</code> argument is used, only the top <code>n</code> variables containing many missing values are visualized.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_na_intersect</span><span class='op'>(</span>n_vars <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>If you use the <code>n_intersacts</code> argument, only the top n numbers of variable combinations(intersection) including missing values are visualized. and If you want to visualize the combination variables that is include missing value and complete case. You just add only_na = FALSE.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>mice</span><span class='fu'>::</span><span class='va'><a href='https://amices.org/mice/reference/boys.html'>boys</a></span> <span class='op'>%&gt;%</span>
  <span class='fu'>plot_na_intersect</span><span class='op'>(</span>only_na <span class='op'>=</span> <span class='cn'>FALSE</span>, n_intersacts <span class='op'>=</span> <span class='fl'>7</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="automated-report">Automated report</h2>
<p>dlookr provides two automated data diagnostic reports:</p>
<ul>
<li>Web page-based dynamic reports can perform in-depth analysis through visualization and statistical tables.</li>
<li>Static reports generated as pdf files or html files can be archived as output of data analysis.</li>
</ul>
<h3 id="create-a-diagnostic-report-using-diagnose_web_report">Create a diagnostic report using <code>diagnose_web_report()</code></h3>
<p><code>diagnose_web_report()</code> create dynamic report for object inherited from data.frame(<code>tbl_df</code>, <code>tbl</code>, etc) or data.frame.</p>
<h4 id="contents-of-dynamic-web-report">Contents of dynamic web report</h4>
<p>The contents of the report are as follows.:</p>
<ul>
<li>Overview
<ul>
<li>Data Structures
<ul>
<li>Data Structures</li>
<li>Data Types</li>
<li>Job Informations</li>
</ul></li>
<li>Warnings</li>
<li>Variables</li>
</ul></li>
<li>Missing Values
<ul>
<li>List of Missing Values</li>
<li>Visualization</li>
</ul></li>
<li>Unique Values
<ul>
<li>Categorical Variables</li>
<li>Numerical Variables</li>
</ul></li>
<li>Outliers</li>
<li>Samples
<ul>
<li>Duplicated</li>
<li>Heads</li>
<li>Tails</li>
</ul></li>
</ul>
<h4 id="some-arguments-for-dynamic-web-report">Some arguments for dynamic web report</h4>
<p>diagnose_web_report() generates various reports with the following arguments.</p>
<ul>
<li>output_file
<ul>
<li>name of generated file.</li>
</ul></li>
<li>output_dir
<ul>
<li>name of directory to generate report file.</li>
</ul></li>
<li>title
<ul>
<li>title of report.</li>
</ul></li>
<li>subtitle
<ul>
<li>subtitle of report.</li>
</ul></li>
<li>author
<ul>
<li>author of report.</li>
</ul></li>
<li>title_color
<ul>
<li>color of title.</li>
</ul></li>
<li>thres_uniq_cat
<ul>
<li>threshold to use for “Unique Values - Categorical Variables”.</li>
</ul></li>
<li>thres_uniq_num
<ul>
<li>threshold to use for “Unique Values - Numerical Variables”.</li>
</ul></li>
<li>logo_img
<ul>
<li>name of logo image file on top left.</li>
</ul></li>
<li>create_date
<ul>
<li>The date on which the report is generated.</li>
</ul></li>
<li>theme
<ul>
<li>name of theme for report. support “orange” and “blue”.</li>
</ul></li>
<li>sample_percent
<ul>
<li>Sample percent of data for performing Diagnosis.</li>
</ul></li>
</ul>
<p>The following script creates a quality diagnosis report for the <code>tbl_df</code> class object, <code>flights</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span> <span class='op'>%&gt;%</span>
  <span class='fu'>diagnose_web_report</span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"flights"</span>, output_dir <span class='op'>=</span> <span class='st'>"./"</span>, 
                      output_file <span class='op'>=</span> <span class='st'>"Diagn.html"</span>, theme <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="screenshot-of-dynamic-report">Screenshot of dynamic report</h4>
<ul>
<li>The part of the report is shown in the following figure.:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center">
<img src="img/diag_web_title.jpg" alt="The part of the report" width="80%" />
<p class="caption">
(#fig:diag_web_title)The part of the report
</p>
</div>
</div>
<ul>
<li>The dynamic contents of the report is shown in the following figure.:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center">
<img src="img/diag_web_content.jpg" alt="The dynamic contents of the report" width="80%" />
<p class="caption">
(#fig:diag_web_content)The dynamic contents of the report
</p>
</div>
</div>
<h3 id="create-a-diagnostic-report-using-diagnose_paged_report">Create a diagnostic report using <code>diagnose_paged_report()</code></h3>
<p><code>diagnose_paged_report()</code> create static report for object inherited from data.frame(<code>tbl_df</code>, <code>tbl</code>, etc) or data.frame.</p>
<h4 id="contents-of-static-paged-report">Contents of static paged report</h4>
<p>The contents of the report are as follows.:</p>
<ul>
<li>Overview
<ul>
<li>Data Structures</li>
<li>Job Informations</li>
<li>Warnings</li>
<li>Variables</li>
</ul></li>
<li>Missing Values
<ul>
<li>List of Missing Values</li>
<li>Visualization</li>
</ul></li>
<li>Unique Values
<ul>
<li>Categorical Variables</li>
<li>Numerical Variables<br />
</li>
</ul></li>
<li>Categorical Variable Diagnosis
<ul>
<li>Top Ranks</li>
</ul></li>
<li>Numerical Variable Diagnosis
<ul>
<li>Distribution
<ul>
<li>Zero Values</li>
<li>Minus Values</li>
</ul></li>
<li>Outliers
<ul>
<li>List of Outliers</li>
<li>Individual Outliers</li>
</ul></li>
</ul></li>
</ul>
<h4 id="some-arguments-for-static-paged-report">Some arguments for static paged report</h4>
<p>diagnose_paged_report() generates various reports with the following arguments.</p>
<ul>
<li>output_format
<ul>
<li>report output type. Choose either “pdf” and “html”.</li>
</ul></li>
<li>output_file
<ul>
<li>name of generated file.</li>
</ul></li>
<li>output_dir
<ul>
<li>name of directory to generate report file.</li>
</ul></li>
<li>title
<ul>
<li>title of report.</li>
</ul></li>
<li>subtitle
<ul>
<li>subtitle of report.</li>
</ul></li>
<li>abstract_title
<ul>
<li>abstract of report</li>
</ul></li>
<li>author
<ul>
<li>author of report.</li>
</ul></li>
<li>title_color
<ul>
<li>color of title.</li>
</ul></li>
<li>subtitle_color
<ul>
<li>color of subtitle.</li>
</ul></li>
<li>thres_uniq_cat
<ul>
<li>threshold to use for “Unique Values - Categorical Variables”.</li>
</ul></li>
<li>thres_uniq_num
<ul>
<li>threshold to use for “Unique Values - Numerical Variables”.</li>
</ul></li>
<li>flag_content_zero
<ul>
<li>whether to output “Zero Values” information.</li>
</ul></li>
<li>flag_content_minus
<ul>
<li>whether to output “Minus Values” information.</li>
</ul></li>
<li>flag_content_missing
<ul>
<li>whether to output “Missing Value” information.<br />
</li>
</ul></li>
<li>logo_img
<ul>
<li>name of logo image file on top left.</li>
</ul></li>
<li>cover_img
<ul>
<li>name of cover image file on center.</li>
</ul></li>
<li>create_date
<ul>
<li>The date on which the report is generated.</li>
</ul></li>
<li>theme
<ul>
<li>name of theme for report. support “orange” and “blue”.</li>
</ul></li>
<li>sample_percent
<ul>
<li>Sample percent of data for performing Diagnosis.</li>
</ul></li>
</ul>
<p>The following script creates a quality diagnosis report for the <code>tbl_df</code> class object, <code>flights</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>flights</span> <span class='op'>%&gt;%</span>
  <span class='fu'>diagnose_paged_report</span><span class='op'>(</span>subtitle <span class='op'>=</span> <span class='st'>"flights"</span>, output_dir <span class='op'>=</span> <span class='st'>"./"</span>,
                        output_file <span class='op'>=</span> <span class='st'>"Diagn.pdf"</span>, theme <span class='op'>=</span> <span class='st'>"blue"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="screenshot-of-static-report">Screenshot of static report</h4>
<ul>
<li>The cover of the report is shown in the following figure.:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center">
<img src="img/diag_paged_cover.jpg" alt="The part of the report" width="80%" />
<p class="caption">
(#fig:diag_paged_cover)The part of the report
</p>
</div>
</div>
<ul>
<li>The contents of the report is shown in the following figure.:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center">
<img src="img/diag_paged_content.jpg" alt="The dynamic contents of the report" width="80%" />
<p class="caption">
(#fig:diag_paged_cntent)The dynamic contents of the report
</p>
</div>
</div>
<h2 id="diagnosing-tables-in-dbms">Diagnosing tables in DBMS</h2>
<p>The DBMS table diagnostic function supports In-database mode that performs SQL operations on the DBMS side. If the size of the data is large, using In-database mode is faster.</p>
<p>It is difficult to obtain anomaly or to implement the sampling-based algorithm in SQL of DBMS. So some functions do not yet support In-database mode. In this case, it is performed in In-memory mode in which table data is brought to R side and calculated. In this case, if the data size is large, the execution speed may be slow. It supports the collect_size argument, which allows you to import the specified number of samples of data into R.</p>
<ul>
<li>In-database support functions
<ul>
<li><code>diagonse()</code></li>
<li><code>diagnose_category()</code></li>
</ul></li>
<li>In-database not support functions
<ul>
<li><code>diagnose_numeric()</code></li>
<li><code>diagnose_outlier()</code><br />
</li>
<li><code>plot_outlier()</code><br />
</li>
<li><code>diagnose_web_report()</code></li>
<li><code>diagnose_paged_report()</code></li>
</ul></li>
</ul>
<h3 id="preparing-table-data">Preparing table data</h3>
<p>Copy the <code>carseats</code> data frame to the SQLite DBMS and create it as a table named <code>TB_CARSEATS</code>. Mysql/MariaDB, PostgreSQL, Oracle DBMS, other DBMS are also available for your environment.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://dbi.r-dbi.org'>DBI</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'DBI'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://rsqlite.r-dbi.org'>RSQLite</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'RSQLite'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'dplyr'</span><span class='op'>)</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://dbplyr.tidyverse.org/'>dbplyr</a></span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>'dbplyr'</span><span class='op'>)</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='va'>carseats</span> <span class='op'>&lt;-</span> <span class='fu'>ISLR</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/ISLR/man/Carseats.html'>Carseats</a></span>
<span class='va'>carseats</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span><span class='op'>(</span><span class='va'>carseats</span><span class='op'>)</span><span class='op'>)</span>, <span class='fl'>20</span><span class='op'>)</span>, <span class='st'>"Income"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>
<span class='va'>carseats</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span><span class='op'>(</span><span class='va'>carseats</span><span class='op'>)</span><span class='op'>)</span>, <span class='fl'>5</span><span class='op'>)</span>, <span class='st'>"Urban"</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>NA</span>

<span class='co'># connect DBMS</span>
<span class='va'>con_sqlite</span> <span class='op'>&lt;-</span> <span class='fu'>DBI</span><span class='fu'>::</span><span class='fu'><a href='https://dbi.r-dbi.org/reference/dbConnect.html'>dbConnect</a></span><span class='op'>(</span><span class='fu'>RSQLite</span><span class='fu'>::</span><span class='fu'><a href='https://rsqlite.r-dbi.org/reference/SQLite.html'>SQLite</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>":memory:"</span><span class='op'>)</span>

<span class='co'># copy carseats to the DBMS with a table named TB_CARSEATS</span>
<span class='fu'><a href='https://dplyr.tidyverse.org/reference/copy_to.html'>copy_to</a></span><span class='op'>(</span><span class='va'>con_sqlite</span>, <span class='va'>carseats</span>, name <span class='op'>=</span> <span class='st'>"TB_CARSEATS"</span>, overwrite <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="diagnose-data-quality-of-variables-in-the-dbms">Diagnose data quality of variables in the DBMS</h3>
<p>Use <code>dplyr::tbl()</code> to create a tbl_dbi object, then use it as a data frame object. That is, the data argument of all diagnose function is specified as tbl_dbi object instead of data frame object.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Diagnosis of all columns</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 11 x 6
  variables   types  missing_count missing_percent unique_count
  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt;           &lt;dbl&gt;        &lt;int&gt;
1 Sales       double             0               0          336
2 CompPrice   double             0               0           73
3 Income      double            20               5           97
4 Advertising double             0               0           28
# … with 7 more rows, and 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">
<span class='co'># Positions values select columns, and In-memory mode</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose</span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>8</span>, in_database <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 6
  variables types   missing_count missing_percent unique_count
  &lt;chr&gt;     &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 Sales     numeric             0               0          336
2 Income    numeric            20               5           97
3 Age       numeric             0               0           56
# … with 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  
<span class='co'># Positions values select columns, and In-memory mode and collect size is 200</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose</span><span class='op'>(</span><span class='op'>-</span><span class='fl'>8</span>, <span class='op'>-</span><span class='fl'>9</span>, <span class='op'>-</span><span class='fl'>10</span>, in_database <span class='op'>=</span> <span class='cn'>FALSE</span>, collect_size <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 8 x 6
  variables   types   missing_count missing_percent unique_count
  &lt;chr&gt;       &lt;chr&gt;           &lt;int&gt;           &lt;dbl&gt;        &lt;int&gt;
1 Sales       numeric             0               0          182
2 CompPrice   numeric             0               0           65
3 Income      numeric             6               3           83
4 Advertising numeric             0               0           23
# … with 4 more rows, and 1 more variable: unique_rate &lt;dbl&gt;</code></pre>
</div>
<h3 id="diagnose-data-quality-of-categorical-variables-in-the-dbms">Diagnose data quality of categorical variables in the DBMS</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Positions values select variables, and In-memory mode and collect size is 200</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_category</span><span class='op'>(</span><span class='fl'>7</span>, in_database <span class='op'>=</span> <span class='cn'>FALSE</span>, collect_size <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code># A tibble: 3 x 6
  variables levels     N  freq ratio  rank
  &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt;
1 ShelveLoc Medium   200   113  56.5     1
2 ShelveLoc Bad      200    47  23.5     2
3 ShelveLoc Good     200    40  20       3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  
<span class='co'># Positions values select variables</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_category</span><span class='op'>(</span><span class='op'>-</span><span class='fl'>7</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 5 x 6
  variables levels     N  freq ratio  rank
  &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt;
1 Urban     Yes      400   277 69.2      1
2 Urban     No       400   118 29.5      2
3 Urban     &lt;NA&gt;     400     5  1.25     3
4 US        Yes      400   258 64.5      1
# … with 1 more row</code></pre>
</div>
<h3 id="diagnose-data-quality-of-numerical-variables-in-the-dbms">Diagnose data quality of numerical variables in the DBMS</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Diagnosis of all numerical variables</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_numeric</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 8 x 10
  variables     min     Q1   mean median     Q3   max  zero minus
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
1 Sales           0   5.39   7.50   7.49   9.32  16.3     1     0
2 CompPrice      77 115    125.   125    135    175       0     0
3 Income         21  42     68.2   69     90.2  120       0     0
4 Advertising     0   0      6.64   5     12     29     144     0
# … with 4 more rows, and 1 more variable: outlier &lt;int&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r">  
<span class='co'># Positive values select variables, and In-memory mode and collect size is 200</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_numeric</span><span class='op'>(</span><span class='va'>Sales</span>, <span class='va'>Income</span>, collect_size <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 10
  variables   min    Q1  mean median    Q3   max  zero minus outlier
* &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;
1 Sales         0  5.26  7.42   7.50  9.10  14.9     1     0       0
2 Income       21 48    71.4   73    93    120       0     0       0</code></pre>
</div>
<h3 id="diagnose-outlier-of-numerical-variables-in-the-dbms">Diagnose outlier of numerical variables in the DBMS</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_outlier</span><span class='op'>(</span><span class='op'>)</span>  <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>outliers_ratio</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 1 x 6
  variables outliers_cnt outliers_ratio outliers_mean with_mean
  &lt;chr&gt;            &lt;int&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
1 Price                5           1.25          100.      116.
# … with 1 more variable: without_mean &lt;dbl&gt;</code></pre>
</div>
<h3 id="plot-outlier-information-of-numerical-data-diagnosis-in-the-dbms">Plot outlier information of numerical data diagnosis in the DBMS</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Visualization of numerical variables with a ratio of</span>
<span class='co'># outliers greater than 1%</span>
<span class='co'># the result is same as a data.frame, but not display here. reference above in document.</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>plot_outlier</span><span class='op'>(</span><span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
                 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
                 <span class='fu'>diagnose_outlier</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
                 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>outliers_ratio</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
                 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>variables</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
                 <span class='fu'><a href='https://dplyr.tidyverse.org/reference/pull.html'>pull</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="reporting-the-information-of-data-diagnosis-for-table-of-thr-dbms">Reporting the information of data diagnosis for table of thr DBMS</h3>
<p>The following shows several examples of creating an data diagnosis report for a DBMS table.</p>
<p>Using the <code>collect_size</code> argument, you can perform data diagnosis with the corresponding number of sample data. If the number of data is very large, use <code>collect_size</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create web report file. </span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_web_report</span><span class='op'>(</span><span class='op'>)</span>
  
<span class='co'># create pdf file. file name is Diagn.pdf, and collect size is 350</span>
<span class='va'>con_sqlite</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='st'>"TB_CARSEATS"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>diagnose_paged_report</span><span class='op'>(</span>collect_size <span class='op'>=</span> <span class='fl'>350</span>, output_file <span class='op'>=</span> <span class='st'>"Diagn.pdf"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<div class="distill-site-nav distill-site-footer">
<!--Created by bitR.
<br>-->
Licensed under the <a href="https://opensource.org/licenses/lgpl-3.0.html" target="_blank">GNU General Public License version 3.0</a>
</div>
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
